{% extends "layout.html" %}

{% block title %}
    {{ title }} - Investment Tracker
{% endblock %}

{% block content %}
    <h2>{{ title }}</h2>

    {% if account %}
        <form method="POST" action="{{ url_for('edit_account', account_id=account['account_id']) }}">
            <div>
                <label for="user_id">User:</label>
                <select id="user_id" name="user_id" required>
                    <option value="">-- Select User --</option>
                    {% for u in users %}
                        <option value="{{ u['user_id'] }}" {% if u['user_id'] == account['user_id'] %}selected{% endif %}>
                            {{ u['name'] }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="platform_id">Platform:</label>
                <select id="platform_id" name="platform_id" required>
                    <option value="">-- Select Platform --</option>
                    {% for p in platforms %}
                        <option value="{{ p['platform_id'] }}" {% if p['platform_id'] == account['platform_id'] %}selected{% endif %}>
                            {{ p['name'] }}
                        </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="account_type">Account Type:</label>
                <input type="text" id="account_type" name="account_type" value="{{ account['account_type'] }}" required>
            </div>
            <div>
                <label for="account_name">Custom Account Name:</label>
                <input type="text" id="account_name" name="account_name" value="{{ account['account_name'] }}" required>
            </div>
            <div>
                <label for="cash_balance">Cash Balance:</label>
                <input type="number" step="0.01" id="cash_balance" name="cash_balance" value="{{ '%.2f'|format(account['cash_balance']) }}">
            </div>
            <div>
                <button type="submit">Save Changes</button>
                <a href="{{ url_for('manage_accounts') }}" class="button-link-cancel">Cancel</a>
            </div>
        </form>
    {% else %}
        <p>Account not found. <a href="{{ url_for('manage_accounts') }}">Return to Manage Accounts</a>.</p>
    {% endif %}
{% endblock %}
